# 学习管理系统 - 报表统计模块需求规格

## 文档信息

| 项目 | 内容 |
|-----|------|
| 文档名称 | 报表统计模块 - 详细规格 |
| 版本 | v1.0 |
| 状态 | 已确认 |
| 所属模块 | 模块六 |

---

## 目录

1. [功能概述](#1-功能概述)
2. [用户界面](#2-用户界面)
3. [API 接口](#3-api-接口)
4. [数据统计规则](#4-数据统计规则)

---

## 1. 功能概述

### 1.1 模块目标

提供学习数据的统计分析功能，包括任务完成率、部门报表、个人学习明细和文件学习统计。

### 1.2 核心功能清单

| 功能 | 优先级 | 描述 |
|-----|-------|------|
| 任务完成率统计 | P0 | 任务整体完成情况统计 |
| 部门报表 | P0 | 各部门学习完成情况 |
| 个人学习明细 | P0 | 个人学习记录详情 |
| 文件数据总览 | P1 | 文件学习时长统计 |

---

## 2. 用户界面

### 2.1 报表首页

**页面路径**：`/admin/reports`

```
┌─────────────────────────────────────────────────────────────────────┐
│  学习报表                                                            │
├─────────────────────────────────────────────────────────────────────┤
│  概览数据                                                            │
│  ───────────────────────────────────────────────────────────────    │
│    ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│    │ 任务总数 │  │ 员工总数 │  │ 完成率  │  │ 平均分  │        │
│    │ 12       │  │ 156      │  │ 78%     │  │ 85分    │        │
│    └─────────┘  └─────────┘  └─────────┘  └─────────┘        │
│                                                                      │
│  ┌──────────────────┐  ┌──────────────────┐                    │
│  │ 📊 任务完成率    │  │ 👥 部门报表      │                    │
│  └──────────────────┘  └──────────────────┘                    │
│  ┌──────────────────┐  ┌──────────────────┐                    │
│  │ 👤 个人学习明细  │  │ 📄 文件数据总览  │                    │
│  └──────────────────┘  └──────────────────┘                    │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 任务完成率报表

**页面路径**：`/admin/reports/tasks`

```
┌─────────────────────────────────────────────────────────────────────┐
│  任务完成率报表                                                      │
├─────────────────────────────────────────────────────────────────────┤
│  [任务 ▼]  [部门 ▼]  [时间范围]  [查询]                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  任务完成情况                                                        │
│  ───────────────────────────────────────────────────────────────    │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │ 任务名称      │ 应学 │ 已学 │ 完成 │ 完成率 │ 截止日期   │   │
│  ├────────────────────────────────────────────────────────────┤   │
│  │ 新员工培训    │ 50   │ 45   │ 40   │ 80%    │ 01-31     │   │
│  │ 安全规范培训  │ 50   │ 48   │ 45   │ 90%    │ 02-15     │   │
│  │ 技能提升培训  │ 30   │ 20   │ 15   │ 50%    │ 02-28     │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                      │
│  使用 shadcn/ui Chart 组件展示完成率柱状图                           │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.3 部门报表

**页面路径**：`/admin/reports/departments`

```
┌─────────────────────────────────────────────────────────────────────┐
│  部门报表                                                            │
├─────────────────────────────────────────────────────────────────────┤
│  [部门 ▼]  [时间范围]  [查询]                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  部门完成情况                                                        │
│  ───────────────────────────────────────────────────────────────    │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │ 部门      │ 员工 │ 应学 │ 完成 │ 完成率 │ 平均分       │   │
│  ├────────────────────────────────────────────────────────────┤   │
│  │ 技术部    │ 15   │ 3    │ 45   │ 100%   │ 88分        │   │
│  │ 市场部    │ 10   │ 3    │ 25   │ 83%    │ 82分        │   │
│  │ 人力资源  │ 5    │ 3    │ 15   │ 100%   │ 90分        │   │
│  │ 财务部    │ 8    │ 3    │ 18   │ 75%    │ 85分        │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                      │
│  使用 shadcn/ui Chart 组件展示部门对比图                             │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.4 个人学习明细

**页面路径**：`/admin/reports/users`

```
┌─────────────────────────────────────────────────────────────────────┐
│  个人学习明细                                                        │
├─────────────────────────────────────────────────────────────────────┤
│  [部门 ▼]  [员工搜索...]  [查询]                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │ 👤 张三 (技术部)                      [查看详情]           │   │
│  │   完成 3/3 任务  │  平均 88 分  │  总学习 5h30m          │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                      │
│  展开后显示任务详情和文件学习记录                                      │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.5 文件数据总览

**页面路径**：`/admin/reports/files`

```
┌─────────────────────────────────────────────────────────────────────┐
│  文件数据总览                                                        │
├─────────────────────────────────────────────────────────────────────┤
│  [任务 ▼]  [时间范围]  [查询]                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌────────────────────────────────────────────────────────────┐   │
│  │ 文件名称      │ 类型 │ 平均时长 │ 完成率 │ 访问次数        │   │
│  ├────────────────────────────────────────────────────────────┤   │
│  │ 公司介绍.pdf  │ PDF  │ 8分30秒 │ 95%   │ 148             │   │
│  │ 安全规范视频  │ 视频 │ 12分45秒│ 90%   │ 142             │   │
│  │ 工作流程.pdf  │ PDF  │ 15分20秒│ 88%   │ 135             │   │
│  └────────────────────────────────────────────────────────────┘   │
│                                                                      │
│  使用 shadcn/ui Chart 组件展示时长分布图                              │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 3. API 接口

### 3.1 报表接口

| 接口 | 方法 | 描述 |
|-----|------|------|
| GET /api/reports/tasks | 任务完成率 |
| GET /api/reports/departments | 部门报表 |
| GET /api/reports/users | 个人学习明细 |
| GET /api/reports/files | 文件数据总览 |

### 3.2 响应格式

```json
{
  "success": true,
  "data": { /* 报表数据 */ },
  "timestamp": "2024-01-20T12:00:00Z"
}
```

---

## 4. 数据统计规则

### 4.1 完成率计算

```
完成率 = (已完成数 / 应学数) * 100
```

### 4.2 平均分计算

```
平均分 = 所有测验分数之和 / 测验提交次数
```

### 4.3 时长显示

| 时长范围 | 显示格式 |
|---------|---------|
| < 60秒 | XX秒 |
| < 60分钟 | X分XX秒 |
| >= 60分钟 | X小时Y分 |

---

## 附录

| 文档名称 | 描述 |
|---------|------|
| SRS-01-总体规格.md | 项目总体规格 |
| SRS-02-任务管理.md | 任务管理模块 |
| SRS-03-学习追踪.md | 学习追踪模块 |
| SRS-04-用户认证.md | 用户与认证模块 |
| SRS-05-测验考核.md | 测验考核模块 |
| UI-DESIGN.md | UI/UX 设计规范 |
